<div class="signup-page">
  <div class="form-wrapper">

  <% if @token_invalid %>
    <div class="error-container">
      <h1 class="text-error">Invalid or Expired Link</h1>
      <p class="auth-description">
        The password reset link is invalid or has expired.
      </p>
      <p class="signup-link">
        <%= link_to "Back to Login", login_path %>
      </p>
    </div>
  <% else %>
    <h1>Reset Password</h1>
    <p class="auth-description">
      Create a new password for your account.
    </p>

    <%= form_with model: @user, url: update_password_reset_path(token: params[:token]), method: :patch, local: true do |form| %>

      <div class="form-group">
        <%= form.label :password, "New Password" %>
        <%= form.password_field :password,
              placeholder: "Enter new password",
              autocomplete: "new-password",
              class: "input-field #{'field-error' if @user.errors[:password].present?}" %>
        <% if @user.errors[:password].present? %>
          <p class="inline-error"><%= @user.errors[:password].first %></p>
        <% end %>
      </div>

      <div class="form-group">
        <%= form.label :password_confirmation, "Confirm New Password" %>
        <%= form.password_field :password_confirmation,
              placeholder: "Confirm new password",
              autocomplete: "new-password",
              class: "input-field #{'field-error' if @user.errors[:password_confirmation].present?}" %>
        <% if @user.errors[:password_confirmation].present? %>
          <p class="inline-error"><%= @user.errors[:password_confirmation].first %></p>
        <% end %>
      </div>

      <%= form.submit "Reset Password", class: "btn btn-primary btn-block" %>

    <% end %>
  <% end %>

  </div>
</div>
